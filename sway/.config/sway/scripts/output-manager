#!/bin/bash
set -ex
out_conf=home

sleep 5

if [ "$(sudo cat /etc/hostname)" = "x2sixty" ]; then
  swaymsg output eDP-1 resolution 1920x1080 position 0 1920
  swaymsg output DP-1 mode 1920x1080@74.924Hz position 0 0 transform 90
  exit 0
fi

# reach_gateway() {
#   ip neigh show dev wlan0 to $1 | grep REACHABLE &>/dev/null
# }
reach_gateway() {
  ip a | grep '178.33'
}

# see if home
if reach_gateway
then
  out_conf=home
fi

if [ "$out_conf" = "work" ]
then
  # Work
  swaymsg output DP-3 \
                  resolution 1920x1080 \
                  position 0 0
  swaymsg output eDP-1 \
                  resolution 1920x1080 \
                  position 1920 760
  # echo work > /tmp/sway_output_conf
else
  # Home
  swaymsg output eDP-1 \
                  mode 1920x1080 \
                  position 2800 1440
  swaymsg output DP-2 \
                  mode 1920x1080 \
                  position 0 0
  swaymsg output HDMI-A-1 \
                  mode 3440x1440@99.943001Hz \
                  position 1920 0 \
                  adaptive_sync off 
  # echo home > /tmp/sway_output_conf
fi
